{"version":3,"sources":["tasks/week-8/api-client.js","tasks/week-8/features/auth/slices/currentUserSlice.js","tasks/week-8/features/posts/slices/postsSlice.js","tasks/week-8/features/users/slices/usersSlice.js","tasks/week-8/features/friends-request/slices/friendsRequestSlice.js","tasks/week-8/features/auth/middlewares/auth.js","tasks/week-8/configureStore.js","tasks/week-8/features/auth/components/SignInForm.js","tasks/week-8/features/auth/containers/SignInPage.js","tasks/week-8/features/home/containers/HomePage.js","tasks/week-8/components/404.js","tasks/week-8/features/auth/selectors/currentUser.js","tasks/week-8/components/ProtectedRoute.js","tasks/week-8/components/NotAuthorizedNavbar.js","tasks/week-8/components/AuthorizedNavbar.js","tasks/week-8/features/posts/containers/PostsPage.js","tasks/week-8/features/users/containers/UsersPage.js","tasks/week-8/components/form/TextField.js","tasks/week-8/features/signup/components/SignUpForm.js","tasks/week-8/features/signup/containers/SignUpPage.js","tasks/week-8/features/friends-request/containers/friendsPage.js","tasks/week-8/SocialApp.js","tasks/week-8/index.js","App.js","serviceWorker.js","index.js"],"names":["authToken","localStorage","getItem","apiClient","axios","create","defaults","headers","interceptors","response","use","error","status","console","log","data","store","dispatch","logout","Promise","reject","fetchCurrentUser","createAsyncThunk","thunkAPI","a","get","condition","dispatchConditionRejection","currentUserSlice","createSlice","name","initialState","user","isLoading","reducers","signIn","state","action","payload","extraReducers","pending","loading","fulfilled","rejected","actions","fetchPosts","likePost","postId","post","postsSlice","posts","likedPost","find","_id","index","indexOf","likes","likesNumber","fetchUsers","addToFriends","userId","usersSlice","users","resultMessage","fetchFriends","confirmFriendsRequest","rejectFriendsRequest","friendsRequestSlice","friends","isRequestLoading","authMiddleware","next","type","toString","setItem","clear","middleware","getDefaultMiddleware","configureStore","reducer","currentUser","form","formReducer","devTools","ConnectedSignInForm","reduxForm","handleSubmit","pristine","submitting","className","Form","onSubmit","Field","component","Button","disabled","Message","attached","SignInPage","location","useLocation","history","useHistory","useDispatch","from","pathname","submitForm","useCallback","values","then","replace","catch","err","SubmissionError","_error","message","Container","HomePage","props","NotFoundPage","Header","getCurrentUser","createSelector","ProtectedRoute","children","rest","isAuthenticated","useSelector","render","to","NotAuthorizedNavbar","Menu","activeClassName","AuthorizedNavbar","position","Item","onClick","PostsPage","useEffect","UsersPage","TextField","labelColor","input","label","meta","touched","warning","Label","basic","color","pointing","asyncValidate","params","email","isUserExist","ConnectedSignUpForm","validate","errors","test","password","repeatPassword","first_name","last_name","age","warn","warnings","length","asyncBlurFields","invalid","SignUpPage","useState","hasSignUpCompleted","setSignUpCompleted","registeredEmail","setRegisteredEmail","success","header","content","FriendsPage","SocialApp","hasUserRequested","setUserRequested","path","exact","App","Boolean","window","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9a3941ae.chunk.js","sourcesContent":["import axios from 'axios';\nimport store from './configureStore';\nimport { logout } from './features/auth/slices/currentUserSlice'\n\nconst authToken = localStorage.getItem('authToken');\n\nconst apiClient = axios.create();\n\nif (authToken) {\n    apiClient.defaults.headers['Authorization'] = `Bearer ${authToken}`;\n}\n\napiClient.interceptors.response.use(function (response) {\n    return response;\n}, function (error) {\n    //catches if the session ended!\n    if ( error.response.status === 401) {\n        console.log(\"Auth error\", error.response.data);\n        store.dispatch(logout());\n    }\n    return Promise.reject(error);\n});\n\nexport default apiClient\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\nimport apiClient from '../../../api-client';\n\n// First, create the thunk\nconst fetchCurrentUser = createAsyncThunk(\n  'currentUser/fetchCurrentUser',\n  async (thunkAPI) => {\n    const response = await apiClient.get('/api/users/me');\n    return response.data\n  },\n  {\n    condition: () => !!apiClient.defaults.headers['Authorization'],\n    dispatchConditionRejection: false\n  }\n);\n\nconst currentUserSlice = createSlice({\n  name: 'currentUser',\n  initialState: {\n    user: null,\n    isLoading: false\n  },\n  reducers: {\n    signIn(state, action) {\n      state.user = action.payload.user;\n    },\n    logout(state) {\n      state.user = null;\n      state.isLoading = false;\n    }\n  },\n  extraReducers: {\n    // Add reducers for additional action types here, and handle loading state as needed\n    [fetchCurrentUser.pending]: (state) => {\n      state.loading = true\n    },\n    [fetchCurrentUser.fulfilled]: (state, action) => {\n      // Add user to the state array\n      state.user = action.payload;\n    },\n    [fetchCurrentUser.rejected]: () => ({ user: null, isLoading: false })\n  }\n});\n\nexport const { logout, signIn } = currentUserSlice.actions;\nexport { fetchCurrentUser }\n\nexport default currentUserSlice.reducer;\n","import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport apiClient from '../../../api-client';\n\nconst fetchPosts = createAsyncThunk(\n    'posts/fetchPosts',\n    async (thunkAPI) => {\n        const response = await apiClient.get('/');\n        return response.data\n    },\n    {\n        condition: () => !!apiClient.defaults.headers['Authorization'],\n        dispatchConditionRejection: false\n    }\n);\n\nconst likePost = createAsyncThunk(\n    'posts/likePost',\n    async (postId, thunkAPI) => {\n        const response = await apiClient.post(`/${postId}/like`);\n        return response.data\n    },\n    {\n        condition: () => !!apiClient.defaults.headers['Authorization'],\n        dispatchConditionRejection: false\n    }\n);\n\nconst postsSlice = createSlice({\n    name: 'posts',\n    initialState: {\n        posts: [],\n        isLoading: false\n    },\n    reducers: {\n    },\n    extraReducers: {\n\n        [fetchPosts.pending]: (state) => {\n            state.isLoading = true\n        },\n        [fetchPosts.fulfilled]: (state, action) => {\n\n            state.posts = action.payload;\n            state.isLoading = false;\n        },\n        [fetchPosts.rejected]: () => ({ posts: [], isLoading: false }),\n        [likePost.pending]: (state) => {\n            state.isLoading = true;\n        },\n        [likePost.fulfilled]: (state, action) => {\n            state.isLoading = false;\n            let likedPost = state.posts.find(post=> post._id === action.payload._id);\n            let index = state.posts.indexOf(likedPost);\n\n            if (index !== -1) {\n                state.posts[index].likes = action.payload.likes;\n                state.posts[index].likesNumber = action.payload.likesNumber;\n            }\n\n        },\n    }\n});\n\nexport { fetchPosts, likePost }\n\nexport default postsSlice.reducer;\n","import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport apiClient from '../../../api-client';\n\nconst fetchUsers = createAsyncThunk(\n    'users/fetchUsers',\n    async (thunkAPI) => {\n        const response = await apiClient.get('/');\n        return response.data\n    },\n    {\n        condition: () => !!apiClient.defaults.headers['Authorization'],\n        dispatchConditionRejection: false\n    }\n);\n\nconst addToFriends = createAsyncThunk(\n    'users/addToFriends',\n    async (userId, thunkAPI) => {\n        const response = await apiClient.post(`/${userId}/add`);\n        return response.data\n    },\n    {\n        condition: () => !!apiClient.defaults.headers['Authorization'],\n        dispatchConditionRejection: false\n    }\n);\n\nconst usersSlice = createSlice({\n    name: 'users',\n    initialState: {\n        users: [],\n        isLoading: false,\n        resultMessage: null,\n    },\n    reducers: {\n    },\n    extraReducers: {\n\n        [fetchUsers.pending]: (state) => {\n            state.isLoading = true;\n            state.resultMessage = null;\n        },\n        [fetchUsers.fulfilled]: (state, action) => {\n            state.users = action.payload;\n            state.resultMessage = null;\n            state.isLoading = false;\n        },\n        [fetchUsers.rejected]: () => ({ users: [], isLoading: false }),\n        [addToFriends.fulfilled]: (state) => {\n            state.isLoading = false;\n            state.resultMessage = null;\n        },\n    }\n});\n\nexport { fetchUsers, addToFriends }\n\nexport default usersSlice.reducer;\n\n","import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport apiClient from '../../../api-client';\n\nconst fetchFriends = createAsyncThunk(\n    'friends/fetchUserFriend',\n    async (thunkAPI) => {\n        const response = await apiClient.get('/');\n        return response.data\n    },\n    {\n        condition: () => !!apiClient.defaults.headers['Authorization'],\n        dispatchConditionRejection: false\n    }\n);\n\nconst confirmFriendsRequest = createAsyncThunk(\n    'friends/confirm',\n    async (userId, thunkAPI) => {\n        const response = await apiClient.post(`/${userId}/confirm`);\n        return response.data\n    },\n    {\n        condition: () => !!apiClient.defaults.headers['Authorization'],\n        dispatchConditionRejection: false\n    }\n);\n\nconst rejectFriendsRequest = createAsyncThunk(\n    'friends/reject',\n    async (userId, thunkAPI) => {\n        const response = await apiClient.post(`/${userId}/reject`);\n        return response.data\n    },\n    {\n        condition: () => !!apiClient.defaults.headers['Authorization'],\n        dispatchConditionRejection: false\n    }\n);\n\nconst friendsRequestSlice = createSlice({\n    name: 'friendsRequest',\n    initialState: {\n        friends: [],\n        isRequestLoading: false,\n    },\n    reducers: {\n    },\n    extraReducers: {\n        [fetchFriends.pending]: (state) => {\n            state.isRequestLoading = true;\n        },\n        [fetchFriends.fulfilled]: (state, action) => {\n            state.friends = action.payload;\n            state.isRequestLoading = false;\n        },\n        [fetchFriends.rejected]: () => ({ friends: [], isLoading: false}),\n        [confirmFriendsRequest.pending]: (state) => {\n            state.isRequestLoading = true;\n        },\n        [confirmFriendsRequest.rejected]: () => ({ isLoading: false} ),\n        [confirmFriendsRequest.fulfilled]: (state, action) => {\n            state.isRequestLoading = false;\n            state.friends = action.payload;\n        },\n        [rejectFriendsRequest.pending]: (state) => {\n            state.isRequestLoading = true;\n        },\n        [rejectFriendsRequest.rejected]: () => ({ isLoading: false}),\n        [rejectFriendsRequest.fulfilled]: (state, action) => {\n            state.isRequestLoading = false;\n            state.friends = action.payload;\n        },\n    }\n});\n\nexport { fetchFriends, confirmFriendsRequest, rejectFriendsRequest}\n\nexport default friendsRequestSlice.reducer;\n\n","import { signIn, logout } from '../slices/currentUserSlice'\nimport apiClient from \"../../../api-client\";\n\nconst authMiddleware = store => next => action => {\n    if (action.type === signIn.toString()) {\n        const { authToken } = action.payload;\n        localStorage.setItem('authToken', authToken);\n        apiClient.defaults.headers['Authorization'] = `Bearer ${authToken}`;\n    }\n    if (action.type === logout.toString()) {\n        localStorage.clear();\n        delete apiClient.defaults.headers['Authorization'];\n    }\n\n    next(action);\n};\n\nexport default authMiddleware\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit'\nimport currentUser from './features/auth/slices/currentUserSlice';\nimport posts from './features/posts/slices/postsSlice';\nimport users from './features/users/slices/usersSlice';\nimport friends from './features/friends-request/slices/friendsRequestSlice';\nimport authMiddleware from './features/auth/middlewares/auth'\nimport { reducer as formReducer } from 'redux-form'\n\n\nconst middleware = [...getDefaultMiddleware(), authMiddleware];\n\nconst store = configureStore({\n    reducer: {\n        currentUser,\n        friends,\n        posts,\n        users,\n        form: formReducer,\n    },\n    devTools: true,\n    middleware\n});\n\nexport default store;\n","import React from 'react';\nimport { Button, Form, Message } from 'semantic-ui-react';\nimport { reduxForm, Field } from \"redux-form\";\nimport './SignInForm.css';\n\nfunction SignInForm({ handleSubmit, pristine, submitting, error }) {\n  return (\n    <div className='sign-in-form-wrapper'>\n      <Form className='sign-in-form' onSubmit={handleSubmit}>\n        <Form.Field>\n          <label>Email</label>\n          <Field name=\"email\" component=\"input\" type=\"text\" />\n        </Form.Field>\n        <Form.Field>\n          <label>Password</label>\n          <Field name=\"password\" component=\"input\" type=\"password\" />\n        </Form.Field>\n        <Button disabled={pristine || submitting}>Sign In</Button>\n      </Form>\n      {error &&\n      <Message error attached='bottom'>{error}</Message>\n      }\n    </div>\n  );\n}\n\nconst ConnectedSignInForm = reduxForm({\n  form: 'signin'\n})(SignInForm);\n\nexport default ConnectedSignInForm;\n","import React, { useCallback, useState } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { useDispatch } from \"react-redux\";\nimport { signIn } from \"../slices/currentUserSlice\";\nimport apiClient from \"../../../api-client\";\nimport { Container } from \"semantic-ui-react\";\nimport SignInForm from '../components/SignInForm';\nimport { SubmissionError } from \"redux-form\";\n\nfunction SignInPage() {\n  const location = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { from } = location.state || { from: { pathname: \"/\" } };\n\n  const submitForm = useCallback(values => {\n    return apiClient.post('/auth', values)\n      .then(response => dispatch(signIn(response.data)))\n      .then(() => history.replace(from))\n      .catch(err => {\n        throw new SubmissionError({ _error: err.response.data.message });\n      })\n  }, []);\n\n  return (\n    <Container className='login-page'>\n      <SignInForm onSubmit={submitForm} />\n    </Container>\n  );\n}\n\nexport default SignInPage;\n","import React from 'react';\n\nfunction HomePage(props) {\n  return (\n    <div className='home page'>\n      This is a home page\n    </div>\n  );\n}\n\nexport default HomePage;\n","import React from 'react'\nimport { Header, Container } from 'semantic-ui-react';\n\nexport default function NotFoundPage() {\n    return (\n        <Container className='page'>\n            <Header>\n                404 Page not Found\n            </Header>\n        </Container>\n    )\n}\n","import { createSelector } from '@reduxjs/toolkit'\n\nconst getCurrentUser = createSelector(\n  state => state.currentUser.user,\n  user => user\n);\n\nexport { getCurrentUser }\n","// A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\nimport React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { getCurrentUser } from \"../features/auth/selectors/currentUser\";\n\nexport default function ProtectedRoute({ children, ...rest }) {\n  const currentUser = useSelector(getCurrentUser);\n  const isAuthenticated = !!currentUser;\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        isAuthenticated\n          ? children\n          : <Redirect to={{ pathname: '/sign-in', state: { from: location } }} />\n      }\n    />\n  );\n}\n","import React from 'react';\nimport { NavLink } from \"react-router-dom\";\nimport { Menu } from \"semantic-ui-react\";\n\nfunction NotAuthorizedNavbar(props) {\n  return (\n    <Menu>\n      <NavLink to='/sign-in' className='item' activeClassName='active-nav'>Sign In</NavLink>\n      <NavLink to='/sign-up' className='item' activeClassName='active-nav'>Sign Up</NavLink>\n    </Menu>\n  );\n}\n\nexport default NotAuthorizedNavbar;\n","import React from 'react';\nimport { Menu } from \"semantic-ui-react\";\nimport { NavLink } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { logout } from \"../features/auth/slices/currentUserSlice\";\n\nfunction AuthorizedNavbar() {\n  const dispatch = useDispatch();\n  return (\n    <Menu>\n      <NavLink to='/posts' className='item' activeClassName='active-nav'>Posts</NavLink>\n      <NavLink to='/users' className='item' activeClassName='active-nav'>Users</NavLink>\n      <NavLink to='/friends' className='item' activeClassName='active-nav'>Friends</NavLink>\n      <Menu.Menu position='right'>\n        <Menu.Item onClick={() => dispatch(logout())}>Logout</Menu.Item>\n      </Menu.Menu>\n    </Menu>\n  );\n}\n\nexport default AuthorizedNavbar;\n","import React, {useEffect, useState} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchPosts } from '../slices/postsSlice';\nimport Post from '../components/post';\n\nfunction PostsPage() {\n  const dispatch = useDispatch();\n  const { isLoading, posts } = useSelector(state => state.posts);\n\n  useEffect(() => {\n    dispatch(fetchPosts())\n  },[dispatch]);\n\n\n  return (\n      <div>Posts page</div>\n  );\n}\n\n\nexport default PostsPage;\n","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport { fetchUsers, addToFriends } from '../slices/usersSlice';\n\n\n\nconst UsersPage = () => {\n\n  return (\n      <div>\n        Users page\n      </div>\n\n  );\n};\n\nexport default UsersPage;\n","import React from 'react'\nimport { Form, Label } from 'semantic-ui-react';\n\nfunction TextField({\n  input,\n  label,\n  type,\n  meta: { touched, error, warning },\n  ...rest\n}) {\n\n  let labelColor;\n\n  if(error) {\n    labelColor = 'red'\n  } else if (warning) {\n    labelColor = 'yellow'\n  }\n  const message = error || warning;\n  return (\n    <Form.Field>\n      <input\n        type={type}\n        {...input}\n        {...rest}\n      />\n      {touched && message &&\n      <Label\n        basic\n        color={labelColor}\n        pointing='above'\n      >\n        {message}\n      </Label>\n      }\n    </Form.Field>\n  )\n}\n\nexport default TextField;\n\n","import React from 'react';\nimport { reduxForm, Field } from \"redux-form\";\nimport './SignUpForm.css';\nimport { Button, Form, Message } from \"semantic-ui-react\";\nimport TextField from \"../../../components/form/TextField\";\nimport apiClient from \"../../../api-client\";\n\n\nfunction SignUpForm({ handleSubmit, pristine, submitting, error, invalid }) {\n  return (\n    <div className='sign-up-form-wrapper'>\n      <Form className='sign-up-form' onSubmit={handleSubmit}>\n        <Form.Field>\n          <label>Email</label>\n          <Field name=\"email\" component={TextField} type=\"text\" />\n        </Form.Field>\n        <Form.Field>\n          <label>Password</label>\n          <Field name=\"password\" component={TextField} type=\"password\" />\n        </Form.Field>\n        <Form.Field>\n          <label>Repeat Password</label>\n          <Field name=\"repeatPassword\" component={TextField} type=\"password\" />\n        </Form.Field>\n        <Form.Field>\n          <label>First Name</label>\n          <Field name=\"first_name\" component={TextField} type=\"text\" />\n        </Form.Field>\n        <Form.Field>\n          <label>Last Name</label>\n          <Field name=\"last_name\" component={TextField} type=\"text\" />\n        </Form.Field>\n        <Form.Field>\n          <label>Age</label>\n          <Field name=\"age\" component={TextField} type=\"number\" />\n        </Form.Field>\n        <Button disabled={invalid || pristine || submitting}>\n          Sign Up\n        </Button>\n      </Form>\n      {error &&\n      <Message error attached='bottom'>{error}</Message>\n      }\n    </div>\n  );\n}\n\nconst validate = values => {\n  const errors = {};\n  if (!values.email) {\n    errors.email = 'Required!'\n  } else if (!/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(values.email)) {\n    errors.email = 'Invalid email address'\n  }\n  if (!values.password) {\n    errors.password = 'Required'\n  }\n  if (values.password !== values.repeatPassword) {\n    errors.repeatPassword = 'Password Must be equal'\n  }\n  if (!values.first_name) {\n    errors.first_name = 'Required'\n  }\n  if (!values.last_name) {\n    errors.last_name = 'Required'\n  }\n  if (!values.age) {\n    errors.age = 'Required'\n  } else if (values.age < 18) {\n    errors.age = 'Sorry, you must be at least 18 years old'\n  }\n  return errors;\n};\n\nconst warn = values => {\n  const warnings = {};\n  if (values.age < 19) {\n    warnings.age = 'Hmm, you seem a bit young...'\n  }\n  if (values?.password?.length < 6) {\n    warnings.password = 'Password is too weak'\n  }\n  return warnings;\n};\n\nconst asyncValidate = async (values) => {\n  const response = await apiClient.get('/signup/check-user', { params: { email: values.email } });\n  if (response.data.isUserExist) throw { email: 'This email is already taken' }\n};\n\nconst ConnectedSignUpForm = reduxForm({\n  form: 'signup',\n  validate,\n  warn,\n  asyncValidate,\n  asyncBlurFields: ['email']\n})(SignUpForm);\n\nexport default ConnectedSignUpForm;\n","import React, { useState } from 'react';\nimport { Container, Message } from \"semantic-ui-react\";\nimport SignUpForm from \"../components/SignUpForm\";\nimport apiClient from \"../../../api-client\";\n\nfunction SignUpPage() {\n\n  const [hasSignUpCompleted, setSignUpCompleted] = useState(false);\n  const [registeredEmail, setRegisteredEmail] = useState(false);\n\n  const submitForm = values => {\n    apiClient.post('/signup', values).then(() => {\n      setSignUpCompleted(true);\n      setRegisteredEmail(values.email);\n    })\n  };\n  return (\n    <Container className='sign-up-page'>\n      {!hasSignUpCompleted && <SignUpForm onSubmit={submitForm} /> }\n      { hasSignUpCompleted &&\n      <Message\n        success\n        header='Your user registration was successful'\n        content={<div>Please confirm your email address <strong>{registeredEmail}</strong></div>}\n      >\n      </Message>\n      }\n    </Container>\n  );\n}\n\nexport default SignUpPage;\n","import React, {useEffect, useState} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\n\nimport { fetchFriends, rejectFriendsRequest, confirmFriendsRequest } from '../slices/friendsRequestSlice';\n\nfunction FriendsPage() {\n\n    return (\n        <div>\n            <div>Friends page</div>\n        </div>\n    );\n}\n\nexport default FriendsPage;\n","import React, { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Switch, Route, NavLink } from 'react-router-dom'\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchCurrentUser } from \"./features/auth/slices/currentUserSlice\";\nimport { Container, Header } from \"semantic-ui-react\";\n\n/* routes */\nimport SignInPage from \"./features/auth/containers/SignInPage\";\nimport HomePage from \"./features/home/containers/HomePage\";\nimport NotFoundPage from \"./components/404\";\nimport ProtectedRoute from \"./components/ProtectedRoute\";\nimport { getCurrentUser } from \"./features/auth/selectors/currentUser\";\nimport NotAuthorizedNavbar from \"./components/NotAuthorizedNavbar\";\nimport AuthorizedNavbar from \"./components/AuthorizedNavbar\";\nimport PostsPage from \"./features/posts/containers/PostsPage\";\nimport UsersPage from \"./features/users/containers/UsersPage\";\nimport SignUpPage from \"./features/signup/containers/SignUpPage\";\nimport FriendsPage from './features/friends-request/containers/friendsPage';\n\nfunction SocialApp() {\n  const currentUser = useSelector(getCurrentUser);\n  const dispatch = useDispatch();\n  const [hasUserRequested, setUserRequested] = useState(false);\n  // fetch current user if possible\n  useEffect(() =>{\n      dispatch(fetchCurrentUser())\n        .then(() => setUserRequested(true))\n        .catch(() => setUserRequested(true))\n  }\n, [dispatch]);\n  if (!hasUserRequested) return null;\n  return (\n    <Container className='social-app'>\n      <Router>\n        <Header>\n          <NavLink to='/' activeClassName='active-nav'>Social app</NavLink>\n        </Header>\n        {!currentUser && <NotAuthorizedNavbar />}\n        {currentUser && <AuthorizedNavbar /> }\n        <Switch>\n          <Route path='/' exact>\n            <HomePage />\n          </Route>\n          <Route path='/sign-in' exact>\n            <SignInPage />\n          </Route>\n          <Route path='/sign-up' exact>\n            <SignUpPage />\n          </Route>\n          <ProtectedRoute path='/posts' exact>\n            <PostsPage />\n          </ProtectedRoute>\n          <ProtectedRoute path='/users' exact>\n            <UsersPage />\n          </ProtectedRoute>\n          <ProtectedRoute path='/friends' exact>\n            <FriendsPage />\n          </ProtectedRoute>\n          <Route path='*' component={NotFoundPage} />\n        </Switch>\n      </Router>\n    </Container>\n  );\n}\n\nexport default SocialApp;\n","import React from 'react'\nimport store from './configureStore'\nimport { Provider } from 'react-redux'\nimport SocialApp from './SocialApp'\n\nexport default function App() {\n    return (\n        <Provider store={store}>\n            <SocialApp />\n        </Provider>\n    )\n}\n","import React from 'react';\nimport '../node_modules/semantic-ui-css/semantic.css';\nimport './App.css';\n\n\nimport SocialApp from './tasks/week-8'\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <SocialApp />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}